<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stef, will you be my Valentine?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #2e1a47, #1b1b2f, #000000);
      color: #fff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      padding: 24px;
      transition: background 0.5s ease, color 0.5s ease;
    }

    /* Floating background photos (Valentine view only) */
    .floating-photos {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .floating-photos img {
      position: absolute;
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 20px;
      opacity: 0.38;
      filter: saturate(1.2);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.55);
      animation: floatPhoto 16s ease-in-out infinite;
    }

    .floating-photos img.p1 { top: 6%; left: 8%; animation-duration: 18s; }
    .floating-photos img.p2 { top: 12%; right: 6%; animation-duration: 20s; }
    .floating-photos img.p3 { bottom: 10%; left: 12%; animation-duration: 17s; }
    .floating-photos img.p4 { bottom: 14%; right: 10%; animation-duration: 19s; }
    .floating-photos img.p5 { top: 45%; left: 4%; animation-duration: 21s; }
    .floating-photos img.p6 { top: 52%; right: 4%; animation-duration: 22s; }

    @keyframes floatPhoto {
      0%   { transform: translateY(0) translateX(0) rotate(0deg); }
      25%  { transform: translateY(-18px) translateX(10px) rotate(2deg); }
      50%  { transform: translateY(4px) translateX(-12px) rotate(-2deg); }
      75%  { transform: translateY(-12px) translateX(6px) rotate(1deg); }
      100% { transform: translateY(0) translateX(0) rotate(0deg); }
    }

    /* Main card */
    .card {
      background: radial-gradient(circle at top, rgba(186, 85, 211, 0.9), rgba(18, 18, 30, 0.96));
      border-radius: 26px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.8);
      padding: 32px 26px 40px;
      max-width: 480px;
      width: 100%;
      text-align: center;
      backdrop-filter: blur(18px);
      position: relative;
      z-index: 2;
      overflow: hidden;
      transition: background 0.4s ease, box-shadow 0.4s ease, border-radius 0.4s ease;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -2px;
      border-radius: inherit;
      background: linear-gradient(135deg, #ff4ecb, #8a2be2, #ffb6f9);
      opacity: 0.75;
      z-index: -2;
      transition: background 0.4s ease, opacity 0.4s ease;
    }

    .card::after {
      content: "";
      position: absolute;
      inset: 3px;
      border-radius: inherit;
      background: radial-gradient(circle at top, rgba(36, 12, 64, 0.96), rgba(5, 5, 10, 0.98));
      z-index: -1;
      transition: background 0.4s ease;
    }

    /* Floating hearts (Valentine view) */
    .heart {
      position: absolute;
      width: 22px;
      height: 22px;
      background: #ff4ecb;
      transform: rotate(45deg);
      opacity: 0.75;
      animation: floatHeart 8s linear infinite;
    }

    .heart::before,
    .heart::after {
      content: "";
      position: absolute;
      width: 22px;
      height: 22px;
      background: #ff4ecb;
      border-radius: 50%;
    }
    .heart::before { top: -11px; left: 0; }
    .heart::after  { left: -11px; top: 0; }

    .heart.h1 { left: 6%; bottom: -30px; animation-delay: 0s; }
    .heart.h2 { left: 82%; bottom: -40px; animation-delay: 1.4s; }
    .heart.h3 { left: 24%; bottom: -60px; animation-delay: 2.1s; }
    .heart.h4 { left: 64%; bottom: -55px; animation-delay: 3.3s; }

    @keyframes floatHeart {
      0% { transform: translateY(0) rotate(45deg); opacity: 0; }
      15% { opacity: 0.9; }
      100% { transform: translateY(-260px) rotate(45deg); opacity: 0; }
    }

    h1 {
      font-size: 1.9rem;
      margin-bottom: 8px;
    }

    .name {
      color: #ffbdf9;
      font-weight: 700;
    }

    p.subtitle {
      font-size: 0.98rem;
      margin-bottom: 14px;
      color: #f4d8ff;
    }

    .anniversary {
      font-size: 0.9rem;
      margin-bottom: 22px;
      color: #ffddff;
      opacity: 0.95;
    }

    .question {
      font-size: 1.25rem;
      margin-bottom: 40px;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 18px;
      position: relative;
      z-index: 3;
    }

    button {
      border: none;
      cursor: pointer;
      font-size: 1rem;
      padding: 10px 22px;
      border-radius: 999px;
      transition: transform 0.22s ease, box-shadow 0.22s ease, background 0.2s ease, opacity 0.2s ease, margin 0.2s ease;
    }

    #yesBtn {
      background: #ffffff;
      color: #9100ff;
      font-weight: 700;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
      position: relative;
      z-index: 5;
    }

    #noBtn {
      background: transparent;
      color: #ffddff;
      border: 2px solid rgba(255, 221, 255, 0.9);
      position: relative;
      z-index: 4;
    }

    .hint {
      font-size: 0.8rem;
      color: #f0d8ff;
      opacity: 0.9;
      margin-top: 4px;
    }

    .hidden {
      display: none;
    }

    .message {
      margin-top: 26px;
      font-size: 1.05rem;
      line-height: 1.4;
    }

    .message strong {
      color: #ffbdf9;
    }

    .plan-link {
      color: #ffbdf9;
      text-decoration: underline;
      cursor: pointer;
      font-weight: 600;
    }

    /* Music toggle button */
    #musicToggle {
      margin-top: 18px;
      font-size: 0.8rem;
      padding: 6px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.12);
      color: #f4d8ff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.35);
    }

    #musicToggle:hover {
      background: rgba(255, 255, 255, 0.18);
    }

    /* Mission Impossible theme */
    body.mission-mode {
      background: radial-gradient(circle at top, #110000, #000000, #1a0000);
    }

    body.mission-mode .card {
      background: #050505;
      box-shadow: 0 0 0 rgba(0,0,0,0.7);
      border-radius: 8px;
    }

    body.mission-mode .card::before {
      opacity: 0;
    }

    body.mission-mode .card::after {
      background: radial-gradient(circle at top, #000000, #050505);
    }

    body.mission-mode h1,
    body.mission-mode p {
      font-family: "Courier New", monospace;
      text-transform: none;
    }

    body.mission-mode h1 {
      font-size: 1.4rem;
      letter-spacing: 0.08em;
    }

    .mission-title {
      color: #ff3b3b;
      font-weight: 700;
      margin-bottom: 18px;
      text-align: center;
    }

    .mission-label {
      font-size: 0.85rem;
      color: #ff6666;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 10px;
      text-align: center;
    }

    .mission-text {
      text-align: left;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-line;
      margin-bottom: 18px;
    }

    .mission-highlight {
      color: #ffdddd;
      font-weight: 600;
    }

    .mission-note {
      margin-top: 12px;
      font-size: 0.9rem;
      color: #ff9c9c;
      text-align: center;
    }

    .mission-back {
      margin-top: 20px;
      font-size: 0.8rem;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid #ff3b3b;
      background: transparent;
      color: #ff9c9c;
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    body.mission-mode .floating-photos,
    body.mission-mode .heart {
      display: none;
    }

    body.mission-mode #musicToggle {
      display: none;
    }

    /* Yellow TOP SECRET tape in mission mode */
    .tape {
      position: absolute;
      left: -40%;
      width: 180%;
      height: 32px;
      background: repeating-linear-gradient(
        -45deg,
        #ffeb3b,
        #ffeb3b 16px,
        #000000 16px,
        #000000 24px
      );
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Courier New", monospace;
      font-size: 0.8rem;
      font-weight: 700;
      color: #000;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      box-shadow: 0 4px 12px rgba(0,0,0,0.7);
      z-index: 10;
      opacity: 0;
      transform: translateY(-20px);
      transition: opacity 0.4s ease, transform 0.4s ease;
      overflow: hidden;
    }

    .tape span {
      white-space: nowrap;
      animation: tapeScroll 6s linear infinite;
    }

    #tapeTop {
      top: 13%;
      transform: rotate(-10deg);
    }

    #tapeBottom {
      bottom: 82%;
      transform: rotate(7deg);
    }

    body.mission-mode #tapeTop,
    body.mission-mode #tapeBottom {
      opacity: 1;
      transform: translateY(0) rotate(-8deg);
    }

    body.mission-mode #tapeBottom {
      transform: translateY(0) rotate(7deg);
    }

    @keyframes tapeScroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    @media (max-width: 600px) {
      body {
        padding: 16px;
      }

      h1 {
        font-size: 1.6rem;
      }

      .question {
        font-size: 1.1rem;
      }

      .card {
        padding: 26px 18px 36px;
      }

      .floating-photos img {
        width: 96px;
        height: 96px;
      }

      #tapeTop {
        top: 14%;
      }

      #tapeBottom {
        bottom: 10%;
      }
    }
  </style>
</head>
<body>
  <!-- Floating background photos -->
  <div class="floating-photos">
    <img src="img1.jpg" alt="Us 1" class="p1">
    <img src="img2.jpg" alt="Us 2" class="p2">
    <img src="img3.jpg" alt="Us 3" class="p3">
    <img src="img4.jpg" alt="Us 4" class="p4">
    <img src="img5.jpg" alt="Us 5" class="p5">
    <img src="img6.JPG" alt="Us 6" class="p6">
  </div>

  <!-- Main card -->
  <div class="card">
    <div id="tapeTop" class="tape">
      <span>TOP SECRET ‚Ä¢ DO NOT DISTRIBUTE ‚Ä¢ TOP SECRET ‚Ä¢ DO NOT DISTRIBUTE ‚Ä¢ TOP SECRET ‚Ä¢ DO NOT DISTRIBUTE ‚Ä¢ </span>
    </div>
    <div id="tapeBottom" class="tape">
      <span>AUTHORIZED PERSONNEL ONLY ‚Ä¢ TOP SECRET ‚Ä¢ AUTHORIZED PERSONNEL ONLY ‚Ä¢ TOP SECRET ‚Ä¢ </span>
    </div>

    <div class="heart h1"></div>
    <div class="heart h2"></div>
    <div class="heart h3"></div>
    <div class="heart h4"></div>

    <div id="valentineContent">
      <h1>Hey <span class="name">Stef</span> ‚ù§Ô∏è</h1>
      <p class="subtitle">
        I made this just for you.
      </p>
      <p class="anniversary">
        Happy 3 months of us on Valentine‚Äôs Day. Thank you for making the last 3 months so special.
      </p>

      <p class="question">
        Will you be my Valentine (and my partner in crime for many more months)?
      </p>

      <div class="buttons">
        <button id="yesBtn">Yes</button>
        <button id="noBtn">No</button>
      </div>

      <p id="finalMessage" class="message hidden">
        <span class="hint">(P.S. I really hoped you click ‚ÄúYes‚Äù)</span><br /><br />
        Happy 3 months to us, Stef. üíñ<br />
        Click here for the plan: <span id="planLink" class="plan-link">Good luck agent</span>.
      </p>

      <audio id="bgMusic" loop>
        <source src="song.mp3" type="audio/mpeg">
      </audio>

      <button id="musicToggle">Play music üéµ</button>
    </div>

    <div id="missionContent" class="hidden">
      <p class="mission-label">CLASSIFIED BRIEFING</p>
      <h1 class="mission-title">ACCESS: AGENT STEF</h1>

      <div class="mission-text">
        Incoming transmission‚Ä¶

        Agent Stef, your skills in looking incredible, laughing at bad jokes, and making the last 3 months amazing have put you on the top-secret shortlist.

        MISSION BRIEF:
        - Target: A mysterious Valentine‚Äôs rendezvous.
        - Handler: Your favorite partner in crime.
        - Threats: Excessive cuteness, possible dessert, and unplanned happiness.

        To complete this mission:
        1. Be ready by <span class="mission-highlight">12:30 PM</span>.
        2. Dress your most <span class="mission-highlight">fancy</span>.
        3. Trust your partner in crime to handle the rest.

        Failure to appear may result in severe FOMO and regret. You have been warned.
      </div>

      <p class="mission-note">
        This message will self-destruct in approximately‚Ä¶ well, whenever you close this tab.  
        See you on Valentine‚Äôs Day, Agent Stef. ‚ù§Ô∏è
      </p>

      <button id="missionBack" class="mission-back">Return to cute mode</button>
    </div>
  </div>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const finalMessage = document.getElementById("finalMessage");
    const planLink = document.getElementById("planLink");
    const valentineContent = document.getElementById("valentineContent");
    const missionContent = document.getElementById("missionContent");
    const missionBack = document.getElementById("missionBack");

    const music = document.getElementById("bgMusic");
    const musicToggle = document.getElementById("musicToggle");

    let noScale = 1.0;
    let yesScale = 1.0;
    let lockedYesSize = null;
    let hasAnswered = false;

    // On load, check if she has ever clicked Yes before
    const stefSaidYesBefore = localStorage.getItem("stefSaidYes") === "true";
    console.log("Stef clicked Yes before:", stefSaidYesBefore);

    // Shrink No, grow Yes, slide Yes over No
    noBtn.addEventListener("click", () => {
      if (hasAnswered) return;

      noScale = Math.max(0.25, noScale - 0.18);
      yesScale = Math.min(2.3, yesScale + 0.18);

      noBtn.style.transform = "scale(" + noScale + ")";
      noBtn.style.opacity = String(0.25 + noScale * 0.6);

      yesBtn.style.transform = "scale(" + yesScale + ")";
      yesBtn.style.opacity = "1";

      yesBtn.style.marginLeft = "40px";
      if (yesScale >= 2.0) {
        yesBtn.style.marginLeft = "52px";
      }
    });

    yesBtn.addEventListener("click", () => {
      hasAnswered = true;

      // store that she clicked Yes (persists across refreshes)
      localStorage.setItem("stefSaidYes", "true");

      if (lockedYesSize === null) {
        lockedYesSize = yesScale;
        yesBtn.style.transform = "scale(" + lockedYesSize + ")";
      }

      yesBtn.disabled = true;
      noBtn.disabled = true;
      noBtn.style.opacity = "0";

      finalMessage.classList.remove("hidden");
      finalMessage.style.marginTop = "18px";

      yesBtn.style.opacity = "0.95";
    });

    // Music controls
    music.volume = 0.1;
    let isPlaying = false;

    musicToggle.addEventListener("click", async () => {
      try {
        if (!isPlaying) {
          await music.play();
          isPlaying = true;
          musicToggle.textContent = "Pause music üéµ";
        } else {
          music.pause();
          isPlaying = false;
          musicToggle.textContent = "Play music üéµ";
        }
      } catch (e) {
        console.log("Playback blocked or failed", e);
      }
    });

    // Switch to Mission Impossible theme
    planLink.addEventListener("click", () => {
      document.body.classList.add("mission-mode");
      valentineContent.classList.add("hidden");
      missionContent.classList.remove("hidden");
    });

    // Back to cute mode (optional)
    missionBack.addEventListener("click", () => {
      document.body.classList.remove("mission-mode");
      missionContent.classList.add("hidden");
      valentineContent.classList.remove("hidden");
    });
  </script>
</body>
</html>
